<% if (auth.length > 0) { %>import { test, expect } from '@playwright/test'

test.describe('<%= projectName %> - Authentication', () => {
  test('should display authentication page', async ({ page }) => {
    await page.goto('/auth')

    // Check if auth page loads
    await expect(page.locator('h2')).toContainText('Sign In')

    <% if (auth.includes('email')) { %>// Check for email/password form
    await expect(page.locator('input[type="email"]')).toBeVisible()
    await expect(page.locator('input[type="password"]')).toBeVisible()

    <% } %><% auth.forEach(provider => { if (['github', 'google', 'discord', 'microsoft'].includes(provider)) { %>// Check for <%= provider %> OAuth button
    await expect(page.locator('text=Continue with <%= provider.charAt(0).toUpperCase() + provider.slice(1) %>')).toBeVisible()

    <% }}) %>// Check for mode toggle
    await expect(page.locator('text=Don\'t have an account')).toBeVisible()
  })

  <% if (auth.includes('email')) { %>test('should show validation errors for invalid email', async ({ page }) => {
    await page.goto('/auth')

    // Try to submit with invalid email
    await page.fill('input[type="email"]', 'invalid-email')
    await page.fill('input[type="password"]', 'password123')
    await page.click('button[type="submit"]')

    // Should show validation error
    // Note: This depends on your validation implementation
    // await expect(page.locator('text=Invalid email')).toBeVisible()
  })

  test('should switch between login and signup modes', async ({ page }) => {
    await page.goto('/auth')

    // Should start in login mode
    await expect(page.locator('h2')).toContainText('Sign In')

    // Click to switch to signup
    await page.click('text=Don\'t have an account')

    // Should switch to signup mode
    await expect(page.locator('h2')).toContainText('Create Account')

    // Should show additional fields for signup
    await expect(page.locator('input[type="text"]')).toBeVisible() // Name field

    // Switch back to login
    await page.click('text=Already have an account')

    // Should be back in login mode
    await expect(page.locator('h2')).toContainText('Sign In')
  })

  test('should validate password requirements in signup', async ({ page }) => {
    await page.goto('/auth')

    // Switch to signup mode
    await page.click('text=Don\'t have an account')

    // Fill form with weak password
    await page.fill('input[type="text"]', 'Test User')
    await page.fill('input[type="email"]', 'test@example.com')
    await page.fill('input[id="password"]', '123')
    await page.fill('input[id="confirmPassword"]', '123')

    // Try to submit
    await page.click('button[type="submit"]')

    // Should show password validation error
    // Note: This depends on your validation implementation
  })

  test('should validate password confirmation', async ({ page }) => {
    await page.goto('/auth')

    // Switch to signup mode
    await page.click('text=Don\'t have an account')

    // Fill form with mismatched passwords
    await page.fill('input[type="text"]', 'Test User')
    await page.fill('input[type="email"]', 'test@example.com')
    await page.fill('input[id="password"]', 'password123')
    await page.fill('input[id="confirmPassword"]', 'different123')

    // Try to submit
    await page.click('button[type="submit"]')

    // Should show password mismatch error
    // await expect(page.locator('text=Passwords do not match')).toBeVisible()
  })

  <% } %>test('should handle authentication redirects', async ({ page }) => {
    // Test that unauthenticated users are redirected appropriately
    // This depends on how your auth middleware is set up

    // Try to access a protected route (if you have any)
    // await page.goto('/dashboard')
    // await expect(page).toHaveURL('/auth')
  })

  <% auth.forEach(provider => { if (['github', 'google', 'discord', 'microsoft'].includes(provider)) { %>test('should handle <%= provider %> OAuth flow', async ({ page }) => {
    await page.goto('/auth')

    // Mock the OAuth response or test the redirect
    // Note: For real OAuth testing, you'd need to mock the provider
    // or use test accounts with the OAuth providers

    // Click the <%= provider %> button
    const <%= provider %>Button = page.locator('text=Continue with <%= provider.charAt(0).toUpperCase() + provider.slice(1) %>')
    await expect(<%= provider %>Button).toBeVisible()

    // For now, just check that the button exists and is clickable
    await expect(<%= provider %>Button).toBeEnabled()

    // In a real test, you would:
    // 1. Click the button
    // 2. Handle the OAuth redirect
    // 3. Verify successful authentication
  })

  <% }}) %>test('should display loading states', async ({ page }) => {
    await page.goto('/auth')

    <% if (auth.includes('email')) { %>// Fill out the login form
    await page.fill('input[type="email"]', 'test@example.com')
    await page.fill('input[type="password"]', 'password123')

    // Submit the form and check for loading state
    const submitButton = page.locator('button[type="submit"]')
    await submitButton.click()

    // Should show loading state
    // await expect(submitButton).toBeDisabled()
    // await expect(page.locator('text=Loading')).toBeVisible()

    <% } %>})
})

<% } else { %>// No authentication configured - skipping auth tests
export {}<% } %>