# CLAUDE.md â€” <%= projectName %>

> **Project:** `<%= projectName.toLowerCase().replace(/\s+/g, '-') %>` â€” <%= description %>
> **Author:** <%= author %>
> **Status:** Development
> **Created:** <%= new Date().toLocaleDateString() %>

---

## ğŸš¨ BEFORE ANYTHING ELSE

1. **Read the constitution:** [constitution.md](constitution.md) â€” Immutable project principles
2. **Check project status:** [docs/PROJECT_STATUS.md](docs/PROJECT_STATUS.md) â€” Current state & blockers
3. **Review architecture:** [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md) â€” System design decisions
<% if (pbsLevel !== 'none') { %>4. **Initialize tracking:** Run `bd init` then `bd onboard`<% } %>

---

## ğŸ“š Essential Documentation

| Document | Purpose | Read When |
|----------|---------|-----------|
| [constitution.md](constitution.md) | Immutable principles | **Never modify** |
| [PROJECT_STATUS.md](docs/PROJECT_STATUS.md) | Current state & blockers | Start of each session |
| [ARCHITECTURE.md](docs/ARCHITECTURE.md) | System design decisions | Before structural changes |
| [API.md](docs/API.md) | API documentation | Working with backend |
<% if (testing.length > 0) { %>| [TESTING.md](docs/TESTING.md) | Testing strategy & setup | Running or writing tests |<% } %>
<% if (docker) { %>| [DEPLOYMENT.md](docs/DEPLOYMENT.md) | Deployment & infrastructure | Production deployments |<% } %>

---

## ğŸ¯ Project Overview

**Tech Stack:**
<% if (database !== 'none') { %>- **Database:** <%= database === 'postgresql' ? 'PostgreSQL' : database === 'turso' ? 'Turso (LibSQL)' : 'SQLite' %> with Drizzle ORM<% } %>
<% if (auth.length > 0) { %>- **Authentication:** Better Auth with <%= auth.join(', ') %><% } %>
- **Frontend:** React + TypeScript + Vite + TanStack Router
- **Backend:** Hono.js
<% if (apiStyle !== 'none') { %>- **API:** <%= apiStyle === 'orpc' ? 'oRPC' : apiStyle === 'trpc' ? 'tRPC' : 'REST' %><% } %>
- **Styling:** Tailwind CSS<% if (uiStyle !== 'default') { %> + shadcn/ui (<%= uiStyle %> theme)<% } %>
<% if (testing.length > 0) { %>- **Testing:** <%= testing.join(', ') %><% if (unitTesting) { %> + Vitest<% } %><% } %>
<% if (docker) { %>- **Infrastructure:** Docker + CI/CD<% } %>

**Key Features:**
<% if (pwa) { %>- âœ… Progressive Web App (PWA)<% } %>
<% if (analytics !== 'none') { %>- âœ… Analytics (<%= analytics %>)<% } %>
<% if (errorTracking !== 'none') { %>- âœ… Error Tracking (<%= errorTracking %>)<% } %>
<% if (auth.length > 0) { %>- âœ… Multi-provider Authentication<% } %>
<% if (database !== 'none') { %>- âœ… Type-safe Database Access<% } %>
<% if (testing.length > 0) { %>- âœ… Comprehensive Testing Suite<% } %>

---

## ğŸ“ Project Structure

```
<%= projectName.toLowerCase().replace(/\s+/g, '-') %>/
â”œâ”€â”€ README.md                    # Project overview & setup
â”œâ”€â”€ CLAUDE.md                    # â† You are here (AI instructions)
â”œâ”€â”€ constitution.md              # Immutable project principles
â”œâ”€â”€ package.json                 # Dependencies & scripts
â”œâ”€â”€ tsconfig.json               # TypeScript configuration
â”œâ”€â”€ vite.config.ts              # Build configuration
<% if (docker) { %>â”œâ”€â”€ Dockerfile                  # Container configuration
â”œâ”€â”€ docker-compose.yml          # Development environment<% } %>
â”‚
â”œâ”€â”€ src/                        # Application source code
â”‚   â”œâ”€â”€ main.tsx                # Application entry point
â”‚   â”œâ”€â”€ index.css               # Global styles & theme
â”‚   â”œâ”€â”€ routes/                 # TanStack Router pages
â”‚   â”‚   â”œâ”€â”€ __root.tsx          # Root layout
â”‚   â”‚   â”œâ”€â”€ index.tsx           # Homepage
â”‚   â”‚   â””â”€â”€ about.tsx           # About page
â”‚   â”œâ”€â”€ components/             # Reusable UI components
â”‚   â”‚   â”œâ”€â”€ ui/                 # Base UI components
â”‚   â”‚   â””â”€â”€ layout/             # Layout components
â”‚   â”œâ”€â”€ lib/                    # Utilities & configurations
â”‚   â”‚   â”œâ”€â”€ utils.ts            # Common utilities
â”‚   â”‚   â””â”€â”€ api.ts              # API client
<% if (database !== 'none') { %>â”‚   â”œâ”€â”€ db/                     # Database configuration
â”‚   â”‚   â”œâ”€â”€ index.ts            # Database connection
â”‚   â”‚   â”œâ”€â”€ schema.ts           # Database schema
â”‚   â”‚   â””â”€â”€ migrations/         # Database migrations<% } %>
<% if (auth.length > 0) { %>â”‚   â”œâ”€â”€ auth/                   # Authentication
â”‚   â”‚   â””â”€â”€ config.ts           # Auth configuration<% } %>
<% if (apiStyle === 'orpc') { %>â”‚   â””â”€â”€ api/                   # oRPC API routes<% } %>
<% if (apiStyle === 'trpc') { %>â”‚   â””â”€â”€ trpc/                  # tRPC procedures<% } %>
â”‚   â””â”€â”€ server/                 # Hono.js backend
â”‚       â””â”€â”€ index.ts            # Server entry point
â”‚
<% if (testing.length > 0) { %>â”œâ”€â”€ tests/                      # Test files
<% if (testing.includes('playwright')) { %>â”‚   â”œâ”€â”€ e2e/                    # Playwright E2E tests<% } %>
<% if (testing.includes('puppeteer')) { %>â”‚   â”œâ”€â”€ automation/            # Puppeteer tests<% } %>
<% if (unitTesting) { %>â”‚   â””â”€â”€ unit/                  # Unit tests<% } %>
â”‚
<% } %>â”œâ”€â”€ public/                     # Static assets
â””â”€â”€ docs/                       # Project documentation
    â”œâ”€â”€ PROJECT_STATUS.md       # Current state & progress
    â”œâ”€â”€ ARCHITECTURE.md         # System design
    â”œâ”€â”€ API.md                  # API documentation
<% if (testing.length > 0) { %>    â”œâ”€â”€ TESTING.md              # Testing guide<% } %>
<% if (docker) { %>    â””â”€â”€ DEPLOYMENT.md           # Deployment guide<% } %>
```

---

## ğŸš¦ Golden Rules (Never Break)

1. **Constitution is IMMUTABLE** â€” Never modify `constitution.md`
2. **Type Safety First** â€” 100% TypeScript, no `any` types
3. **Test Before Deploy** â€” All tests must pass
4. **Document Changes** â€” Update docs when changing architecture
5. **Security First** â€” Validate all inputs, use environment variables
6. **Performance Matters** â€” Optimize for Core Web Vitals

---

<% if (pbsLevel !== 'none') { %>## ğŸ¤– AI Workflow (PBS System)

### Issue Tracking (Beads)
```bash
bd init                          # Initialize (first time only)
bd onboard                       # Get integration instructions
bd ready                         # What's ready to work on?
bd list --status open            # All open issues
bd create "title" -p 1 -t task   # Create new issue
bd update bd-XXXX --status progress  # Update status
bd close bd-XXXX --reason "Done"     # Close completed issue
```

### Development Workflow
1. **Plan** â€” Document what you're building in issues
2. **Build** â€” Implement with type safety and testing
3. **Ship** â€” Deploy with proper CI/CD pipeline

---

<% } %>## ğŸ”§ Development Commands

### Core Development
```bash
# Development
bun dev                         # Start development server
bun build                       # Build for production
bun preview                     # Preview production build

# Code Quality
bun typecheck                   # TypeScript checking
bun lint                        # ESLint checking
bun lint:fix                    # Fix ESLint errors
bun format                      # Format with Prettier
bun format:check                # Check formatting
```

<% if (database !== 'none') { %>### Database Commands
```bash
bun db:generate                 # Generate migrations
bun db:migrate                  # Run migrations
bun db:push                     # Push schema changes (dev)
bun db:studio                   # Open Drizzle Studio
<% if (database === 'sqlite') { %>bun db:seed                    # Seed database<% } %>
```

<% } %><% if (testing.length > 0) { %>### Testing Commands
```bash
<% if (testing.includes('playwright')) { %>bun test:e2e                   # Playwright E2E tests
bun test:e2e:ui                 # E2E tests with UI<% } %>
<% if (unitTesting) { %>bun test:unit                  # Unit tests with Vitest
bun test:unit:ui                # Unit tests with UI<% } %>
<% if (testing.includes('puppeteer')) { %>bun test:automation            # Puppeteer automation tests<% } %>
<% if (testing.length > 1 || (testing.length > 0 && unitTesting)) { %>bun test:all                   # Run all tests<% } %>
```

<% } %><% if (docker) { %>### Docker Commands
```bash
bun docker:build               # Build Docker image
bun docker:run                 # Run Docker container
bun docker:dev                 # Start development environment
```

<% } %>---

## ğŸ“‹ Session Protocol

### Start of Session
1. Check `docs/PROJECT_STATUS.md` for current state
<% if (pbsLevel !== 'none') { %>2. Run `bd ready` to see available work<% } %>
3. Review any blockers or dependencies

### During Session
1. Update issue status when starting work
2. Document architectural decisions in `docs/ARCHITECTURE.md`
3. Write tests for new functionality
4. Update API documentation for backend changes

### End of Session
1. Update `docs/PROJECT_STATUS.md` with current state
<% if (pbsLevel !== 'none') { %>2. Close completed issues with `bd close`
3. Create issues for discovered work<% } %>
4. Ensure all tests pass before committing
5. Update documentation if needed

---

## ğŸš€ Deployment

<% if (docker) { %>### Docker Deployment
```bash
# Build and deploy
docker build -t <%= projectName.toLowerCase().replace(/\s+/g, '-') %> .
docker run -p 3000:3000 <%= projectName.toLowerCase().replace(/\s+/g, '-') %>
```

### Environment Variables
<% } %>Make sure to set the following environment variables:

```env
# Required
NODE_ENV=production
<% if (database === 'postgresql') { %>DATABASE_URL=postgresql://user:pass@host:port/dbname<% } %>
<% if (database === 'turso') { %>DATABASE_URL=libsql://your-database-url.turso.io
DATABASE_AUTH_TOKEN=your-auth-token<% } %>
<% if (database === 'sqlite') { %>DATABASE_URL=./production.db<% } %>

<% if (auth.length > 0) { %># Authentication
BETTER_AUTH_SECRET=your-secret-key-here
BETTER_AUTH_URL=https://your-domain.com
<% auth.forEach(provider => { if (['github', 'google', 'discord', 'microsoft'].includes(provider)) { %>
# <%= provider.charAt(0).toUpperCase() + provider.slice(1) %> OAuth
<%= provider.toUpperCase() %>_CLIENT_ID=your-client-id
<%= provider.toUpperCase() %>_CLIENT_SECRET=your-client-secret<% }}) %>

<% } %><% if (analytics === 'google') { %># Analytics
VITE_GA_ID=G-XXXXXXXXXX<% } %>
<% if (analytics === 'posthog') { %># PostHog
VITE_POSTHOG_KEY=your-posthog-key
VITE_POSTHOG_HOST=https://app.posthog.com<% } %>

<% if (errorTracking === 'sentry') { %># Error Tracking
VITE_SENTRY_DSN=https://your-dsn@sentry.io/project<% } %>
<% if (errorTracking === 'bugsnag') { %>VITE_BUGSNAG_API_KEY=your-bugsnag-key<% } %>
```

---

## ğŸ”— Useful Links

| Resource | URL |
|----------|-----|
| **Project Repository** | [GitHub Repository URL] |
<% if (database === 'postgresql') { %>| **PostgreSQL Docs** | https://postgresql.org/docs |<% } %>
<% if (database === 'turso') { %>| **Turso Docs** | https://docs.turso.tech |<% } %>
| **Drizzle ORM** | https://orm.drizzle.team |
| **TanStack Router** | https://tanstack.com/router |
| **Hono.js** | https://hono.dev |
<% if (uiStyle !== 'default') { %>| **shadcn/ui** | https://ui.shadcn.com |<% } %>
<% if (testing.includes('playwright')) { %>| **Playwright** | https://playwright.dev |<% } %>
<% if (testing.includes('puppeteer')) { %>| **Puppeteer** | https://pptr.dev |<% } %>
<% if (unitTesting) { %>| **Vitest** | https://vitest.dev |<% } %>

---

*Last Updated: <%= new Date().toLocaleDateString() %>*
*Generated by KareTech Stack*