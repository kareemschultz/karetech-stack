# Database MCP Configuration

> Generated by create-karetech-stack for **<%= projectName %>**

## Overview

This project uses **<%= database === 'postgresql' ? 'PostgreSQL' : database === 'sqlite' ? 'SQLite' : database === 'turso' ? 'Turso (libSQL)' : 'No database' %>** with MCP (Model Context Protocol) integration for AI-assisted database operations.

<% if (database === 'postgresql') { %>
## PostgreSQL MCP Server

**Package:** `@modelcontextprotocol/server-postgres`
**Type:** Official (Anthropic)
**Access:** Read-only

### Features

- Schema inspection (tables, columns, types)
- Read-only SQL query execution
- Automatic schema discovery
- Safe database analysis

### Configuration

1. Set your database URL in `.env.local`:
   ```bash
   DATABASE_URL=postgresql://postgres:postgres@localhost:5432/<%= projectName %>
   ```

2. The MCP server is configured in `.claude/settings.json`

### Security Notes

- This server operates in **read-only mode** - it cannot modify your database
- Always use environment variables for credentials
- Consider using connection pooling for production

<% } else if (database === 'sqlite') { %>
## SQLite MCP Server

**Package:** `@modelcontextprotocol/server-sqlite`
**Type:** Official (Anthropic)
**Access:** Read/Write

### Features

- Local database file access
- Schema inspection and querying
- Direct file-based operations
- No network required

### Configuration

1. Ensure the database file exists:
   ```bash
   mkdir -p data
   touch data/<%= projectName %>.db
   ```

2. Set the path in `.env.local`:
   ```bash
   SQLITE_DB_PATH=./data/<%= projectName %>.db
   ```

### Security Notes

- This server has **write access** - use caution
- Back up your database before AI-assisted operations
- Ensure proper file permissions

<% } else if (database === 'turso') { %>
## Turso MCP Server

**Package:** `mcp-turso`
**Type:** Community (nbbaier)
**Access:** Read/Write

### Features

- Cloud-hosted libSQL access
- Edge-optimized operations
- Global replication support
- SQL query execution

### Configuration

1. Create a database at [Turso Dashboard](https://turso.tech/app)

2. Get your credentials and add to `.env.local`:
   ```bash
   TURSO_DATABASE_URL=libsql://<%= projectName %>-<%= author || 'user' %>.turso.io
   TURSO_AUTH_TOKEN=your-auth-token
   ```

### Security Notes

- Store auth token securely - never commit to version control
- Use environment-specific tokens (dev/staging/prod)
- Rotate tokens regularly

<% } %>

## Claude Code Integration

The database MCP server is configured in your `.claude/settings.json`:

```json
{
  "mcpServers": {
<% if (database === 'postgresql') { %>
    "postgres": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-postgres", "${DATABASE_URL}"]
    }
<% } else if (database === 'sqlite') { %>
    "sqlite": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-sqlite", "./data/<%= projectName %>.db"]
    }
<% } else if (database === 'turso') { %>
    "turso": {
      "command": "npx",
      "args": ["-y", "mcp-turso"],
      "env": {
        "TURSO_DATABASE_URL": "${TURSO_DATABASE_URL}",
        "TURSO_AUTH_TOKEN": "${TURSO_AUTH_TOKEN}"
      }
    }
<% } %>
  }
}
```

## Usage Examples

Once configured, you can use Claude Code to:

- "Show me the database schema"
- "What tables exist in the database?"
- "Describe the users table structure"
<% if (database !== 'postgresql') { %>
- "Insert a new record into the users table"
- "Update the status of order #123"
<% } else { %>

Note: PostgreSQL MCP server is read-only and cannot execute INSERT, UPDATE, or DELETE queries.
<% } %>

## Troubleshooting

### Connection Issues

1. Verify environment variables are set correctly
2. Test database connection manually
3. Check network/firewall settings

### Permission Issues

<% if (database === 'postgresql') { %>
- Ensure database user has SELECT permissions
- Verify USAGE permission on schemas
<% } else if (database === 'sqlite') { %>
- Check file permissions on the database
- Ensure the data directory exists
<% } else if (database === 'turso') { %>
- Verify auth token is valid
- Check database exists in Turso dashboard
<% } %>

---

*Generated by create-karetech-stack*
